<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>지붕위 테니스 클럽 친선전</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      font-size: 16px;
    }
    h1, h2 {
      text-align: center;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #000;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    .men-doubles-table th, .men-doubles-table td {
      font-size: 27px;
      padding: 24px;
    }
    .women-doubles-table th, .women-doubles-table td {
      font-size: 27px;
      padding: 24px;
    }
    input[type="number"] {
      width: 40px;
      text-align: center;
    }
    .highlight {
      background-color: yellow; /* 하이라이트 색상 */
    }
    .player-name {
      cursor: pointer; /* 터치 가능 표시 */
    }
    @media (max-width: 768px) {
      body {
        margin: 10px;
        font-size: 14px;
      }
      table {
        font-size: 12px;
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }
      th, td {
        padding: 4px;
      }
      .men-doubles-table th, .men-doubles-table td {
        font-size: 16px;
        padding: 8px;
      }
      .women-doubles-table th, .women-doubles-table td {
        font-size: 16px;
        padding: 8px;
      }
      input[type="number"] {
        width: 30px;
        font-size: 12px;
        padding: 2px;
      }
      h1 {
        font-size: 20px;
      }
      h2 {
        font-size: 16px;
      }
      ul li {
        font-size: 12px;
      }
    }
  </style>
</head>
<body>
  <h1>지붕위 테니스 클럽 친선전 스케줄 및 개인 순위표</h1>
  <h2>2025년 6월 7일</h2>

  <h2>대회 정보</h2>
  <ul>
    <li><strong>날짜:</strong> 2025년 6월 7일 토요일</li>
    <li><strong>시간:</strong> 오후 6:00 ~ 오후 9:45</li>
    <li><strong>경기 형식:</strong> 1세트, 6게임제, 노애드 스코어링, 경기당 25분</li>
    <li><strong>코트:</strong> 6:00~8:00: 3, 4, 5, 6, 7, 8번 / 8:05~9:45: 4, 5, 6번</li>
  </ul>

  <h2>여자 복식 정보</h2>
  <ul>
    <li><strong>참가자:</strong> 김나경, 김유하, 이은지, 이지화, 김지원, 남정주, 최창민</li>
    <li><strong>형식:</strong> 1인당 4경기, 총 7경기, 시간대별 분산, 6번 코트 고정 (단, 6:25~6:50은 남자 복식 사용)</li>
  </ul>

  <h2>남자 복식 정보</h2>
  <ul>
    <li><strong>참가자:</strong> 정수현, 권혁이, 박상원, 기훈, 김석준, 이범주, 백건재, 안종현, 김수동, 노민영, 전우식, 강동혁, 강기훈, 정래민, 정현두, 최준호, 김정보, 지민석, 상우, 김명수, 김덕헌</li>
    <li><strong>형식:</strong> 1인당 4~5경기, 총 23경기, 티어 균형, 시간대 분산</li>
  </ul>

  <h2>참고</h2>
  <ul>
    <li>코트 외: 30경기 (여자 7경기, 남자 23경기) 기록만</li>
    <li>순위는 승리 게임 수, 게임득실 순으로 결정 (게임득실 = 획득 게임 - 실점 게임)</li>
    <li>티어: 팀 티어 합 균등 배치</li>
  </ul>

  <h2>스케줄 (6:00~8:05)</h2>
  <table>
    <thead>
      <tr>
        <th>시간</th>
        <th>3번 코트</th>
        <th>4번 코트</th>
        <th>5번 코트</th>
        <th>6번 코트</th>
        <th>7번 코트</th>
        <th>8번 코트</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>6:00~6:25</td>
        <td>최준호&기훈 vs 정수현&김석준<br><input type="number" id="score-600-3-team1" min="0" max="6"> : <input type="number" id="score-600-3-team2" min="0" max="6"></td>
        <td>권혁이&김명수 vs 백건재&강기훈<br><input type="number" id="score-600-4-team1" min="0" max="6"> : <input type="number" id="score-600-4-team2" min="0" max="6"></td>
        <td>-</td>
        <td>김나경&김유하 vs 이은지&이지화<br><input type="number" id="score-600-6-team1" min="0" max="6"> : <input type="number" id="score-600-6-team2" min="0" max="6"></td>
        <td>-</td>
        <td>상우&안종현 vs 지민석&김정보<br><input type="number" id="score-600-8-team1" min="0" max="6"> : <input type="number" id="score-600-8-team2" min="0" max="6"></td>
      </tr>
      <tr>
        <td>6:25~6:50</td>
        <td>김명수&안종현 vs 강기훈&김수동<br><input type="number" id="score-625-3-team1" min="0" max="6"> : <input type="number" id="score-625-3-team2" min="0" max="6"></td>
        <td>-</td>
        <td>권혁이&지민석 vs 백건재&상우<br><input type="number" id="score-625-5-team1" min="0" max="6"> : <input type="number" id="score-625-5-team2" min="0" max="6"></td>
        <td>박상원&이범주 vs 정래민&강동혁<br><input type="number" id="score-625-6-team1" min="0" max="6"> : <input type="number" id="score-625-6-team2" min="0" max="6"></td>
        <td>정수현&김석준 vs 전우식&최준호<br><input type="number" id="score-625-7-team1" min="0" max="6"> : <input type="number" id="score-625-7-team2" min="0" max="6"></td>
        <td>김덕헌&기훈 vs 김정보&노민영<br><input type="number" id="score-625-8-team1" min="0" max="6"> : <input type="number" id="score-625-8-team2" min="0" max="6"></td>
      </tr>
      <tr>
        <td>6:50~7:15</td>
        <td>-</td>
        <td>박상원&정현두 vs 정래민&백건재<br><input type="number" id="score-650-4-team1" min="0" max="6"> : <input type="number" id="score-650-4-team2" min="0" max="6"></td>
        <td>기훈&강기훈 vs 지민석&이범주<br><input type="number" id="score-650-5-team1" min="0" max="6"> : <input type="number" id="score-650-5-team2" min="0" max="6"></td>
        <td>이은지&남정주 vs 김유하&최창민<br><input type="number" id="score-650-6-team1" min="0" max="6"> : <input type="number" id="score-650-6-team2" min="0" max="6"></td>
        <td>김수동&전우식 vs 강동혁&노민영<br><input type="number" id="score-650-7-team1" min="0" max="6"> : <input type="number" id="score-650-7-team2" min="0" max="6"></td>
        <td>김덕헌&상우 vs 김정보&김명수<br><input type="number" id="score-650-8-team1" min="0" max="6"> : <input type="number" id="score-650-8-team2" min="0" max="6"></td>
      </tr>
      <tr>
        <td>7:15~7:40</td>
        <td>김정보&백건재 vs 지민석&최준호<br><input type="number" id="score-715-3-team1" min="0" max="6"> : <input type="number" id="score-715-3-team2" min="0" max="6"></td>
        <td>-</td>
        <td>정래민&박상원 vs 강동혁&안종현<br><input type="number" id="score-715-5-team1" min="0" max="6"> : <input type="number" id="score-715-5-team2" min="0" max="6"></td>
        <td>-</td>
        <td>김석준&기훈 vs 정수현&권혁이<br><input type="number" id="score-715-7-team1" min="0" max="6"> : <input type="number" id="score-715-7-team2" min="0" max="6"></td>
        <td>이범주&김덕헌 vs 전우식&정현두<br><input type="number" id="score-715-8-team1" min="0" max="6"> : <input type="number" id="score-715-8-team2" min="0" max="6"></td>
      </tr>
      <tr>
        <td>7:40~8:05</td>
        <td>김명수&정수현 vs 강동혁&김수동<br><input type="number" id="score-740-3-team1" min="0" max="6"> : <input type="number" id="score-740-3-team2" min="0" max="6"></td>
        <td>권혁이&정현두 vs 전우식&노민영<br><input type="number" id="score-740-4-team1" min="0" max="6"> : <input type="number" id="score-740-4-team2" min="0" max="6"></td>
        <td>-</td>
        <td>김나경&이지화 vs 김유하&최창민<br><input type="number" id="score-740-6-team1" min="0" max="6"> : <input type="number" id="score-740-6-team2" min="0" max="6"></td>
        <td>최준호&정래민 vs 박상원&강기훈<br><input type="number" id="score-740-7-team1" min="0" max="6"> : <input type="number" id="score-740-7-team2" min="0" max="6"></td>
        <td>-</td>
      </tr>
    </tbody>
  </table>

  <h2>스케줄 (8:05~9:45)</h2>
  <table>
    <thead>
      <tr>
        <th>시간</th>
        <th>4번 코트</th>
        <th>5번 코트</th>
        <th>6번 코트</th>
        <th>7번 코트</th>
        <th>8번 코트</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>8:05~8:30</td>
        <td>정현두&강기훈 vs 노민영&전우식<br><input type="number" id="score-805-4-team1" min="0" max="6"> : <input type="number" id="score-805-4-team2" min="0" max="6"></td>
        <td>정래민&상우 vs 안종현&지민석<br><input type="number" id="score-805-5-team1" min="0" max="6"> : <input type="number" id="score-805-5-team2" min="0" max="6"></td>
        <td>김지원&이은지 vs 이지화&최창민<br><input type="number" id="score-805-6-team1" min="0" max="6"> : <input type="number" id="score-805-6-team2" min="0" max="6"></td>
        <td>-</td>
        <td>-</td>
      </tr>
      <tr>
        <td>8:30~8:55</td>
        <td>강동혁&김덕헌 vs 상우&기훈<br><input type="number" id="score-830-4-team1" min="0" max="6"> : <input type="number" id="score-830-4-team2" min="0" max="6"></td>
        <td>권혁이&정수현 vs 정현두&노민영<br><input type="number" id="score-830-5-team1" min="0" max="6"> : <input type="number" id="score-830-5-team2" min="0" max="6"></td>
        <td>김지원&김나경 vs 남정주&최창민<br><input type="number" id="score-830-6-team1" min="0" max="6"> : <input type="number" id="score-830-6-team2" min="0" max="6"></td>
        <td>-</td>
        <td>-</td>
      </tr>
      <tr>
        <td>8:55~9:20</td>
        <td>김석준&김명수 vs 안종현&김정보<br><input type="number" id="score-855-4-team1" min="0" max="6"> : <input type="number" id="score-855-4-team2" min="0" max="6"></td>
        <td>이범주&최준호 vs 김덕헌&김수동<br><input type="number" id="score-855-5-team1" min="0" max="6"> : <input type="number" id="score-855-5-team2" min="0" max="6"></td>
        <td>김지원&이은지 vs 이지화&남정주<br><input type="number" id="score-855-6-team1" min="0" max="6"> : <input type="number" id="score-855-6-team2" min="0" max="6"></td>
        <td>-</td>
        <td>-</td>
      </tr>
      <tr>
        <td>9:20~9:45</td>
        <td>박상원&이범주 vs 백건재&김석준<br><input type="number" id="score-920-4-team1" min="0" max="6"> : <input type="number" id="score-920-4-team2" min="0" max="6"></td>
        <td>-</td>
        <td>김지원&김유하 vs 김나경&남정주<br><input type="number" id="score-920-6-team1" min="0" max="6"> : <input type="number" id="score-920-6-team2" min="0" max="6"></td>
        <td>-</td>
        <td>-</td>
      </tr>
    </tbody>
  </table>

  <h2>남자 복식 순위표</h2>
  <table class="men-doubles-table">
    <thead>
      <tr>
        <th>선수</th>
        <th>승</th>
        <th>패</th>
        <th>게임득실</th>
      </tr>
    </thead>
    <tbody id="men-doubles-rankings">
      <tr><td class="player-name" data-player="정래민">정래민</td><td id="wins-정래민">0</td><td id="losses-정래민">0</td><td id="game-diff-정래민">0</td></tr>
      <tr><td class="player-name" data-player="권혁이">권혁이</td><td id="wins-권혁이">0</td><td id="losses-권혁이">0</td><td id="game-diff-권혁이">0</td></tr>
      <tr><td class="player-name" data-player="기훈">기훈</td><td id="wins-기훈">0</td><td id="losses-기훈">0</td><td id="game-diff-기훈">0</td></tr>
      <tr><td class="player-name" data-player="김명수">김명수</td><td id="wins-김명수">0</td><td id="losses-김명수">0</td><td id="game-diff-김명수">0</td></tr>
      <tr><td class="player-name" data-player="김석준">김석준</td><td id="wins-김석준">0</td><td id="losses-김석준">0</td><td id="game-diff-김석준">0</td></tr>
      <tr><td class="player-name" data-player="김수동">김수동</td><td id="wins-김수동">0</td><td id="losses-김수동">0</td><td id="game-diff-김수동">0</td></tr>
      <tr><td class="player-name" data-player="노민영">노민영</td><td id="wins-노민영">0</td><td id="losses-노민영">0</td><td id="game-diff-노민영">0</td></tr>
      <tr><td class="player-name" data-player="백건재">백건재</td><td id="wins-백건재">0</td><td id="losses-백건재">0</td><td id="game-diff-백건재">0</td></tr>
      <tr><td class="player-name" data-player="강동혁">강동혁</td><td id="wins-강동혁">0</td><td id="losses-강동혁">0</td><td id="game-diff-강동혁">0</td></tr>
      <tr><td class="player-name" data-player="박상원">박상원</td><td id="wins-박상원">0</td><td id="losses-박상원">0</td><td id="game-diff-박상원">0</td></tr>
      <tr><td class="player-name" data-player="상우">상우</td><td id="wins-상우">0</td><td id="losses-상우">0</td><td id="game-diff-상우">0</td></tr>
      <tr><td class="player-name" data-player="안종현">안종현</td><td id="wins-안종현">0</td><td id="losses-안종현">0</td><td id="game-diff-안종현">0</td></tr>
      <tr><td class="player-name" data-player="이범주">이범주</td><td id="wins-이범주">0</td><td id="losses-이범주">0</td><td id="game-diff-이범주">0</td></tr>
      <tr><td class="player-name" data-player="전우식">전우식</td><td id="wins-전우식">0</td><td id="losses-전우식">0</td><td id="game-diff-전우식">0</td></tr>
      <tr><td class="player-name" data-player="정수현">정수현</td><td id="wins-정수현">0</td><td id="losses-정수현">0</td><td id="game-diff-정수현">0</td></tr>
      <tr><td class="player-name" data-player="정현두">정현두</td><td id="wins-정현두">0</td><td id="losses-정현두">0</td><td id="game-diff-정현두">0</td></tr>
      <tr><td class="player-name" data-player="지민석">지민석</td><td id="wins-지민석">0</td><td id="losses-지민석">0</td><td id="game-diff-지민석">0</td></tr>
      <tr><td class="player-name" data-player="최준호">최준호</td><td id="wins-최준호">0</td><td id="losses-최준호">0</td><td id="game-diff-최준호">0</td></tr>
      <tr><td class="player-name" data-player="강기훈">강기훈</td><td id="wins-강기훈">0</td><td id="losses-강기훈">0</td><td id="game-diff-강기훈">0</td></tr>
      <tr><td class="player-name" data-player="김정보">김정보</td><td id="wins-김정보">0</td><td id="losses-김정보">0</td><td id="game-diff-김정보">0</td></tr>
      <tr><td class="player-name" data-player="김덕헌">김덕헌</td><td id="wins-김덕헌">0</td><td id="losses-김덕헌">0</td><td id="game-diff-김덕헌">0</td></tr>
    </tbody>
  </table>

  <h2>여자 복식 순위표</h2>
  <table class="women-doubles-table">
    <thead>
      <tr>
        <th>선수</th>
        <th>승</th>
        <th>패</th>
        <th>게임득실</th>
      </tr>
    </thead>
    <tbody id="women-doubles-rankings">
      <tr><td class="player-name" data-player="김나경">김나경</td><td id="wins-김나경">0</td><td id="losses-김나경">0</td><td id="game-diff-김나경">0</td></tr>
      <tr><td class="player-name" data-player="김유하">김유하</td><td id="wins-김유하">0</td><td id="losses-김유하">0</td><td id="game-diff-김유하">0</td></tr>
      <tr><td class="player-name" data-player="이은지">이은지</td><td id="wins-이은지">0</td><td id="losses-이은지">0</td><td id="game-diff-이은지">0</td></tr>
      <tr><td class="player-name" data-player="이지화">이지화</td><td id="wins-이지화">0</td><td id="losses-이지화">0</td><td id="game-diff-이지화">0</td></tr>
      <tr><td class="player-name" data-player="김지원">김지원</td><td id="wins-김지원">0</td><td id="losses-김지원">0</td><td id="game-diff-김지원">0</td></tr>
      <tr><td class="player-name" data-player="남정주">남정주</td><td id="wins-남정주">0</td><td id="losses-남정주">0</td><td id="game-diff-남정주">0</td></tr>
      <tr><td class="player-name" data-player="최창민">최창민</td><td id="wins-최창민">0</td><td id="losses-최창민">0</td><td id="game-diff-최창민">0</td></tr>
    </tbody>
  </table>

  <!-- Firebase SDK 추가 -->
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore-compat.js"></script>
  <script>
    // Firebase 설정 (형이 제공한 설정 값 입력)
    const firebaseConfig = {
      apiKey: "AIzaSyAlcszFYMqJjaJQHajx7K695zoeRS7PsxU",
      authDomain: "tennis-plan-jibung.firebaseapp.com",
      databaseURL: "https://tennis-plan-jibung-default-rtdb.firebaseio.com",
      projectId: "tennis-plan-jibung",
      storageBucket: "tennis-plan-jibung.firebasestorage.app",
      messagingSenderId: "491083537160",
      appId: "1:491083537160:web:0c2ec53b1285aa1cdc6abd",
      measurementId: "G-4CSJLPFJD6"
    };

    // Firebase 초기화
    let app, db;
    try {
      app = firebase.initializeApp(firebaseConfig);
      db = firebase.firestore();
    } catch (error) {
      console.error("Firebase 초기화 실패: ", error);
      alert("Firebase 설정을 확인해주세요. firebaseConfig에 올바른 값을 입력했는지 확인하세요.");
    }

    // 경기 정보 (시간-코트-팀1&팀2)
    const matches = [
      { time: "600", court: "3", team1: ["최준호", "기훈"], team2: ["정수현", "김석준"] },
      { time: "600", court: "4", team1: ["권혁이", "김명수"], team2: ["백건재", "강기훈"] },
      { time: "600", court: "6", team1: ["김나경", "김유하"], team2: ["이은지", "이지화"], isWomen: true },
      { time: "600", court: "8", team1: ["상우", "안종현"], team2: ["지민석", "김정보"] },
      { time: "625", court: "3", team1: ["김명수", "안종현"], team2: ["강기훈", "김수동"] },
      { time: "625", court: "5", team1: ["권혁이", "지민석"], team2: ["백건재", "상우"] },
      { time: "625", court: "6", team1: ["박상원", "이범주"], team2: ["정래민", "강동혁"] },
      { time: "625", court: "7", team1: ["정수현", "김석준"], team2: ["전우식", "최준호"] },
      { time: "625", court: "8", team1: ["김덕헌", "기훈"], team2: ["김정보", "노민영"] },
      { time: "650", court: "4", team1: ["박상원", "정현두"], team2: ["정래민", "백건재"] },
      { time: "650", court: "5", team1: ["기훈", "강기훈"], team2: ["지민석", "이범주"] },
      { time: "650", court: "6", team1: ["이은지", "남정주"], team2: ["김유하", "최창민"], isWomen: true },
      { time: "650", court: "7", team1: ["김수동", "전우식"], team2: ["강동혁", "노민영"] },
      { time: "650", court: "8", team1: ["김덕헌", "상우"], team2: ["김정보", "김명수"] },
      { time: "715", court: "3", team1: ["김정보", "백건재"], team2: ["지민석", "최준호"] },
      { time: "715", court: "5", team1: ["정래민", "박상원"], team2: ["강동혁", "안종현"] },
      { time: "715", court: "7", team1: ["김석준", "기훈"], team2: ["정수현", "권혁이"] },
      { time: "715", court: "8", team1: ["이범주", "김덕헌"], team2: ["전우식", "정현두"] },
      { time: "740", court: "3", team1: ["김명수", "정수현"], team2: ["강동혁", "김수동"] },
      { time: "740", court: "4", team1: ["권혁이", "정현두"], team2: ["전우식", "노민영"] },
      { time: "740", court: "6", team1: ["김나경", "이지화"], team2: ["김유하", "최창민"], isWomen: true },
      { time: "740", court: "7", team1: ["최준호", "정래민"], team2: ["박상원", "강기훈"] },
      { time: "805", court: "4", team1: ["정현두", "강기훈"], team2: ["노민영", "전우식"] },
      { time: "805", court: "5", team1: ["정래민", "상우"], team2: ["안종현", "지민석"] },
      { time: "805", court: "6", team1: ["김지원", "이은지"], team2: ["이지화", "최창민"], isWomen: true },
      { time: "830", court: "4", team1: ["강동혁", "김덕헌"], team2: ["상우", "기훈"] },
      { time: "830", court: "5", team1: ["권혁이", "정수현"], team2: ["정현두", "노민영"] },
      { time: "830", court: "6", team1: ["김지원", "김나경"], team2: ["남정주", "최창민"], isWomen: true },
      { time: "855", court: "4", team1: ["김석준", "김명수"], team2: ["안종현", "김정보"] },
      { time: "855", court: "5", team1: ["이범주", "최준호"], team2: ["김덕헌", "김수동"] },
      { time: "855", court: "6", team1: ["김지원", "이은지"], team2: ["이지화", "남정주"], isWomen: true },
      { time: "920", court: "4", team1: ["박상원", "이범주"], team2: ["백건재", "김석준"] },
      { time: "920", court: "6", team1: ["김지원", "김유하"], team2: ["김나경", "남정주"], isWomen: true },
    ];

    // 선수별 기록 저장
    let menStats = {};
    let womenStats = {};

    // 초기화
    function initializeStats() {
      const men = ["정래민", "권혁이", "기훈", "김명수", "김석준", "김수동", "노민영", "백건재", "강동혁", "박상원", "상우", "안종현", "이범주", "전우식", "정수현", "정현두", "지민석", "최준호", "강기훈", "김정보", "김덕헌"];
      const women = ["김나경", "김유하", "이은지", "이지화", "김지원", "남정주", "최창민"];

      men.forEach(player => {
        menStats[player] = { wins: 0, losses: 0, gameDiff: 0 };
      });

      women.forEach(player => {
        womenStats[player] = { wins: 0, losses: 0, gameDiff: 0 };
      });
    }

    // Firestore에서 실시간 스코어 리스너 설정
    function setupRealtimeListeners() {
      if (!db) {
        console.error("Firestore가 초기화되지 않았습니다.");
        return;
      }

      matches.forEach(match => {
        const docRef = db.collection('scores').doc(`${match.time}-${match.court}`);
        docRef.onSnapshot(doc => {
          if (doc.exists) {
            const data = doc.data();
            document.getElementById(`score-${match.time}-${match.court}-team1`).value = data.team1 || 0;
            document.getElementById(`score-${match.time}-${match.court}-team2`).value = data.team2 || 0;
            updateScores();
          }
        });

        // 스코어 입력 시 Firestore에 저장
        const input1 = document.getElementById(`score-${match.time}-${match.court}-team1`);
        const input2 = document.getElementById(`score-${match.time}-${match.court}-team2`);
        [input1, input2].forEach(input => {
          input.addEventListener('change', () => {
            const score1 = parseInt(input1.value) || 0;
            const score2 = parseInt(input2.value) || 0;
            docRef.set({ team1: score1, team2: score2 }).catch(error => {
              console.error("Firestore 저장 실패: ", error);
            });
          });
        });
      });
    }

    // 순위표 업데이트 및 정렬
    function updateRankings() {
      const menRankings = Object.entries(menStats).map(([player, stats]) => ({
        player,
        wins: stats.wins,
        losses: stats.losses,
        gameDiff: stats.gameDiff
      })).sort((a, b) => b.wins - a.wins || b.gameDiff - a.gameDiff);

      const menTableBody = document.getElementById("men-doubles-rankings");
      menTableBody.innerHTML = "";
      menRankings.forEach(({ player, wins, losses, gameDiff }) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td class="player-name" data-player="${player}">${player}</td>
          <td id="wins-${player}">${wins}</td>
          <td id="losses-${player}">${losses}</td>
          <td id="game-diff-${player}">${gameDiff}</td>
        `;
        menTableBody.appendChild(row);
      });

      const womenRankings = Object.entries(womenStats).map(([player, stats]) => ({
        player,
        wins: stats.wins,
        losses: stats.losses,
        gameDiff: stats.gameDiff
      })).sort((a, b) => b.wins - a.wins || b.gameDiff - a.gameDiff);

      const womenTableBody = document.getElementById("women-doubles-rankings");
      womenTableBody.innerHTML = "";
      womenRankings.forEach(({ player, wins, losses, gameDiff }) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td class="player-name" data-player="${player}">${player}</td>
          <td id="wins-${player}">${wins}</td>
          <td id="losses-${player}">${losses}</td>
          <td id="game-diff-${player}">${gameDiff}</td>
        `;
        womenTableBody.appendChild(row);
      });

      // 선수 이름에 이벤트 리스너 추가 (업데이트 후에도 적용되도록)
      setupPlayerHighlight();
    }

    // 선수 이름 클릭/터치 시 경기 하이라이트 함수
    function setupPlayerHighlight() {
      const playerNames = document.querySelectorAll('.player-name');
      playerNames.forEach(player => {
        const handleHighlight = (event) => {
          event.preventDefault(); // 터치 시 스크롤 방지
          const playerName = player.getAttribute('data-player');
          const isHighlighted = player.classList.contains('highlight');

          // 모든 하이라이트 제거
          document.querySelectorAll('.highlight').forEach(el => el.classList.remove('highlight'));

          // 하이라이트 토글
          if (!isHighlighted) {
            // 해당 선수의 경기 셀 하이라이트
            matches.forEach(match => {
              const { time, court, team1, team2, isWomen } = match;
              if ((team1.includes(playerName) || team2.includes(playerName)) && !matchCellEmpty(time, court)) {
                const cell = document.getElementById(`score-${time}-${court}-team1`).parentElement;
                cell.classList.add('highlight');
              }
            });
            player.classList.add('highlight'); // 선수 이름도 하이라이트
          }
        };

        // 터치 및 클릭 이벤트 추가
        player.addEventListener('touchstart', handleHighlight);
        player.addEventListener('click', handleHighlight);
      });
    }

    // 셀이 비어 있는지 확인
    function matchCellEmpty(time, court) {
      const cell = document.getElementById(`score-${time}-${court}-team1`);
      if (!cell) return true;
      const text = cell.parentElement.textContent.trim();
      return text === '-' || text === '';
    }

    // 스코어 업데이트 함수
    function updateScores() {
      initializeStats();

      matches.forEach(match => {
        const score1 = parseInt(document.getElementById(`score-${match.time}-${match.court}-team1`).value) || 0;
        const score2 = parseInt(document.getElementById(`score-${match.time}-${match.court}-team2`).value) || 0;

        if (score1 === 0 && score2 === 0) return;

        const stats = match.isWomen ? womenStats : menStats;
        const team1 = match.team1;
        const team2 = match.team2;

        if (score1 > score2) {
          team1.forEach(player => {
            stats[player].wins += 1;
          });
          team2.forEach(player => {
            stats[player].losses += 1;
          });
        } else if (score2 > score1) {
          team2.forEach(player => {
            stats[player].wins += 1;
          });
          team1.forEach(player => {
            stats[player].losses += 1;
          });
        }

        const gameDiff = score1 - score2;
        team1.forEach(player => {
          stats[player].gameDiff += gameDiff;
        });
        team2.forEach(player => {
          stats[player].gameDiff -= gameDiff;
        });
      });

      updateRankings();
    }

    // 페이지 로드 시 초기화
    initializeStats();
    setupRealtimeListeners();
  </script>
</body>
</html>