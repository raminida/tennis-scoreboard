<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 래랑가로스 (HOSU - OPEN)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-database.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f4f8;
            color: #333;
        }
        .tennis-green {
            background: linear-gradient(to right, #1A3C34, #2A6B5B);
        }
        .gold-accent {
            color: #D4A017;
        }
        .update-btn, .download-btn, .load-btn {
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(212, 160, 23, 0.5);
        }
        .update-btn:hover, .download-btn:hover, .load-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(212, 160, 23, 0.8);
        }
        .update-btn:active, .download-btn:active, .load-btn:active {
            transform: scale(0.95);
        }
        table {
            overflow-x: auto;
            min-width: 100%;
            display: block;
        }
        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #e2e8f0;
            min-width: 80px;
        }
        tr:hover {
            background-color: #f1f5f9;
        }
        input[type="text"] {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #d1d5db;
            transition: all 0.2s ease;
            min-width: 0;
            flex-grow: 1;
        }
        input[type="text"]:focus {
            outline: none;
            border-color: #D4A017;
            box-shadow: 0 0 5px rgba(212, 160, 23, 0.5);
        }
        details summary {
            background: #f9fafb;
            padding: 12px;
            border-radius: 6px;
            transition: background 0.3s ease;
        }
        details summary:hover {
            background: #e5e7eb;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .chart-container {
            margin-top: 20px;
            max-width: 100%;
        }
        .dashboard-card {
            background: #fff;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        @media (max-width: 640px) {
            th, td {
                font-size: 14px;
                padding: 6px;
                min-width: 60px;
            }
            input[type="text"] {
                font-size: 12px;
                padding: 6px;
            }
            .update-btn, .download-btn, .load-btn {
                padding: 10px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body class="min-h-screen p-4 sm:p-6">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-4xl sm:text-5xl font-bold text-center mb-6 text-gray-800 gold-accent shadow-md p-2 rounded-lg" style="background-color: #1A3C34; color: #D4A017;">2025 래랑가로스 (HOSU - OPEN)</h1>
        <p class="text-center text-lg mb-6 text-gray-600"><strong>기간:</strong> 2025년 6월</p>

        <div class="section bg-white shadow-md rounded-lg p-4 sm:p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-4 text-gray-800">회차별 게임 스케줄</h2>
            <p class="note text-sm sm:text-base text-gray-500 mb-4">참고: 1세트, 6게임제, 노애드 스코어링</p>
            <details>
                <summary class="font-medium text-lg">1회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">2회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">3회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">4회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">5회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">6회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">7회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">8회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">9회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">10회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">11회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">12회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">13회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">14회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>
            <details>
                <summary class="font-medium text-lg">15회차</summary>
                <table class="schedule-table w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>플레이어 1</th>
                        <th>플레이어 2</th>
                        <th>vs</th>
                        <th>플레이어 3</th>
                        <th>플레이어 4</th>
                        <th>스코어</th>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                    <tr>
                        <td><input type="text" placeholder="이름" class="player1 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player2 w-full"></td>
                        <td>vs</td>
                        <td><input type="text" placeholder="이름" class="player3 w-full"></td>
                        <td><input type="text" placeholder="이름" class="player4 w-full"></td>
                        <td><input type="text" placeholder="예: 6-4" class="score w-full"></td>
                    </tr>
                </table>
            </details>

            <div class="section bg-white shadow-md rounded-lg p-4 sm:p-6 mb-8">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">월별 순위표</h2>
                <table id="ranking-table" class="w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>순위</th>
                        <th>선수</th>
                        <th>승</th>
                        <th>패</th>
                        <th>게임득실</th>
                        <th>접전 (%)</th>
                        <th>베이글</th>
                        <th>MMR</th>
                    </tr>
                    <tr><td>1</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>2</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>3</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>4</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>5</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>6</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>7</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>8</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>9</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>10</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>11</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>12</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>13</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>14</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>15</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>16</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>17</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>18</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>19</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                    <tr><td>20</td><td><input type="text" class="ranking-player w-full" readonly></td><td><input type="text" class="wins w-full" readonly></td><td><input type="text" class="losses w-full" readonly></td><td><input type="text" class="game-diff w-full" readonly></td><td><input type="text" class="close-set w-full" readonly></td><td><input type="text" class="bagel-wins w-full" readonly></td><td><input type="text" class="mmr w-full" readonly></td></tr>
                </table>
            </div>

            <div class="section bg-white shadow-md rounded-lg p-4 sm:p-6">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">파트너별 승률표</h2>
                <table id="pair-ranking-table" class="w-full bg-white">
                    <tr class="tennis-green text-white">
                        <th>순위</th>
                        <th>페어</th>
                        <th>승</th>
                        <th>패</th>
                        <th>승률 (%)</th>
                    </tr>
                    <tr><td>1</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                    <tr><td>2</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                    <tr><td>3</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                    <tr><td>4</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                    <tr><td>5</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                    <tr><td>6</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                    <tr><td>7</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                    <tr><td>8</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                    <tr><td>9</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                    <tr><td>10</td><td><input type="text" class="pair-name w-full" readonly></td><td><input type="text" class="pair-wins w-full" readonly></td><td><input type="text" class="pair-losses w-full" readonly></td><td><input type="text" class="pair-win-rate w-full" readonly></td></tr>
                </table>
            </div>

            <div class="section bg-white shadow-md rounded-lg p-4 sm:p-6 chart-container">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">월별 MMR 등락표</h2>
                <canvas id="mmrChart"></canvas>
            </div>

            <div class="section bg-white shadow-md rounded-lg p-4 sm:p-6">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">통계 대시보드</h2>
                <div class="dashboard-card">
                    <strong>총 경기 수:</strong> <span id="total-matches">0</span>
                </div>
                <div class="dashboard-card">
                    <strong>평균 접전 비율:</strong> <span id="avg-close-set">0%</span>
                </div>
                <div class="dashboard-card">
                    <strong>베이글 승리율:</strong> <span id="bagel-rate">0%</span>
                </div>
            </div>

            <div class="flex space-x-4 mt-4">
                <button id="update-ranking" class="update-btn flex-1 py-3 bg-gradient-to-r from-yellow-400 to-yellow-500 text-gray-800 font-bold text-lg rounded-lg">순위 업데이트</button>
                <button id="download-file" class="download-btn flex-1 py-3 bg-gradient-to-r from-green-400 to-green-500 text-white font-bold text-lg rounded-lg">파일 다운로드</button>
                <input type="file" id="load-file" accept=".json" class="hidden">
                <button id="load-btn" class="load-btn flex-1 py-3 bg-gradient-to-r from-blue-400 to-blue-500 text-white font-bold text-lg rounded-lg">파일 로드</button>
            </div>
        </div>

        <script>
            // Firebase 설정 (여기서 자신의 프로젝트 설정으로 교체해야 함)
            const firebaseConfig = {
                apiKey: "YOUR_API_KEY",
                authDomain: "YOUR_AUTH_DOMAIN",
                databaseURL: "https://YOUR_DATABASE_NAME.firebaseio.com",
                projectId: "YOUR_PROJECT_ID",
                storageBucket: "YOUR_STORAGE_BUCKET",
                messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
                appId: "YOUR_APP_ID"
            };

            // Firebase 초기화
            firebase.initializeApp(firebaseConfig);
            const database = firebase.database();
            const tennisRef = database.ref('tennisLeague');

            let players = {};
            let pairs = {};
            let chartInstance = null;

            // 실시간 데이터 리스너
            tennisRef.on('value', (snapshot) => {
                const data = snapshot.val() || {};
                players = data.players || {};
                pairs = data.pairs || {};
                const schedule = data.schedule || [];

                // 스케줄 업데이트
                const scheduleRows = document.querySelectorAll('.schedule-table tr:not(:first-child)');
                schedule.forEach((s, index) => {
                    const row = scheduleRows[index];
                    if (row) {
                        row.querySelector('.player1').value = s.match1.p1 || '';
                        row.querySelector('.player2').value = s.match1.p2 || '';
                        row.querySelector('.player3').value = s.match1.p3 || '';
                        row.querySelector('.player4').value = s.match1.p4 || '';
                        row.querySelector('.score').value = s.match1.score || '';
                    }
                });

                updateRanking();
            });

            document.getElementById('update-ranking').addEventListener('click', updateRanking);
            document.getElementById('download-file').addEventListener('click', downloadFile);
            document.getElementById('load-file').addEventListener('change', loadFile);
            document.getElementById('load-btn').addEventListener('click', () => document.getElementById('load-file').click());

            function updateRanking() {
                players = {};
                pairs = {};

                // 플레이어 데이터 초기화
                document.querySelectorAll('.ranking-player').forEach(input => {
                    const name = input.value.trim();
                    if (name) {
                        players[name] = { wins: 0, losses: 0, gameDiff: 0, closeSets: 0, totalSets: 0, bagelWins: 0, mmr: 1500 };
                    }
                });

                // 스케줄에서 경기 결과 처리
                let totalMatches = 0;
                let totalCloseSets = 0;
                let totalBagelWins = 0;
                const scheduleRows = document.querySelectorAll('.schedule-table tr:not(:first-child)');
                scheduleRows.forEach(row => {
                    const player1 = row.querySelector('.player1').value.trim();
                    const player2 = row.querySelector('.player2').value.trim();
                    const player3 = row.querySelector('.player3').value.trim();
                    const player4 = row.querySelector('.player4').value.trim();
                    const score = row.querySelector('.score').value.trim();

                    if (player1 && player2 && player3 && player4 && score) {
                        totalMatches++;
                        const [score1, score2] = score.split('-').map(Number);
                        if (isNaN(score1) || isNaN(score2)) return;

                        const pair1 = [player1, player2].sort().join('-');
                        const pair2 = [player3, player4].sort().join('-');
                        if (!pairs[pair1]) pairs[pair1] = { wins: 0, losses: 0 };
                        if (!pairs[pair2]) pairs[pair2] = { wins: 0, losses: 0 };

                        const isCloseSet = Math.abs(score1 - score2) <= 2;
                        const isBagelWin = (score1 === 6 && score2 === 0) || (score2 === 6 && score1 === 0);
                        if (isCloseSet) totalCloseSets++;
                        if (isBagelWin) totalBagelWins += (score1 === 6 ? 1 : 0) + (score2 === 6 ? 1 : 0);

                        const team1MMR = (players[player1]?.mmr || 1500 + players[player2]?.mmr || 1500) / 2;
                        const team2MMR = (players[player3]?.mmr || 1500 + players[player4]?.mmr || 1500) / 2;
                        const expectedScore1 = 1 / (1 + Math.pow(10, (team2MMR - team1MMR) / 400));
                        const expectedScore2 = 1 - expectedScore1;
                        const K = isCloseSet ? 24 : 32;
                        const scoreMargin = Math.abs(score1 - score2);
                        const marginMultiplier = 1 + (scoreMargin > 4 ? 0.2 : scoreMargin > 2 ? 0.1 : 0);

                        if (score1 > score2) {
                            [player1, player2].forEach(p => {
                                if (players[p]) {
                                    players[p].wins += 1;
                                    players[p].gameDiff += (score1 - score2);
                                    players[p].totalSets += 1;
                                    if (isCloseSet) players[p].closeSets += 1;
                                    if (isBagelWin && score1 === 6) players[p].bagelWins += 1;
                                    players[p].mmr += (K * (1 - expectedScore1) * marginMultiplier) / 2;
                                }
                            });
                            [player3, player4].forEach(p => {
                                if (players[p]) {
                                    players[p].losses += 1;
                                    players[p].gameDiff += (score2 - score1);
                                    players[p].totalSets += 1;
                                    if (isCloseSet) players[p].closeSets += 1;
                                    players[p].mmr += (K * (0 - expectedScore2) * marginMultiplier) / 2;
                                }
                            });
                            pairs[pair1].wins += 1;
                            pairs[pair2].losses += 1;
                        } else {
                            [player3, player4].forEach(p => {
                                if (players[p]) {
                                    players[p].wins += 1;
                                    players[p].gameDiff += (score2 - score1);
                                    players[p].totalSets += 1;
                                    if (isCloseSet) players[p].closeSets += 1;
                                    if (isBagelWin && score2 === 6) players[p].bagelWins += 1;
                                    players[p].mmr += (K * (1 - expectedScore2) * marginMultiplier) / 2;
                                }
                            });
                            [player1, player2].forEach(p => {
                                if (players[p]) {
                                    players[p].losses += 1;
                                    players[p].gameDiff += (score1 - score2);
                                    players[p].totalSets += 1;
                                    if (isCloseSet) players[p].closeSets += 1;
                                    players[p].mmr += (K * (0 - expectedScore1) * marginMultiplier) / 2;
                                }
                            });
                            pairs[pair2].wins += 1;
                            pairs[pair1].losses += 1;
                        }
                    }
                });

                // 개인 순위표 업데이트 (MMR > 승리 > 게임득실 순)
                const rankedPlayers = Object.entries(players)
                    .map(([name, stats]) => ({
                        name,
                        ...stats,
                        closeSetRatio: stats.totalSets ? (stats.closeSets / stats.totalSets * 100).toFixed(2) : 0
                    }))
                    .sort((a, b) => b.mmr - a.mmr || b.wins - a.wins || b.gameDiff - a.gameDiff);

                const rankingRows = document.querySelectorAll('#ranking-table tr:not(:first-child)');
                rankingRows.forEach((row, index) => {
                    const player = rankedPlayers[index];
                    if (player) {
                        row.querySelector('.ranking-player').value = player.name;
                        row.querySelector('.wins').value = player.wins;
                        row.querySelector('.losses').value = player.losses;
                        row.querySelector('.game-diff').value = player.gameDiff;
                        row.querySelector('.close-set').value = player.closeSetRatio;
                        row.querySelector('.bagel-wins').value = player.bagelWins;
                        row.querySelector('.mmr').value = Math.round(player.mmr);
                    } else {
                        row.querySelector('.ranking-player').value = '';
                        row.querySelector('.wins').value = '';
                        row.querySelector('.losses').value = '';
                        row.querySelector('.game-diff').value = '';
                        row.querySelector('.close-set').value = '';
                        row.querySelector('.bagel-wins').value = '';
                        row.querySelector('.mmr').value = '';
                    }
                });

                // 파트너별 승률표 업데이트
                const rankedPairs = Object.entries(pairs)
                    .map(([name, stats]) => ({
                        name,
                        ...stats,
                        winRate: stats.wins + stats.losses ? (stats.wins / (stats.wins + stats.losses) * 100).toFixed(2) : 0
                    }))
                    .sort((a, b) => b.winRate - a.winRate || b.wins - a.wins);

                const pairRows = document.querySelectorAll('#pair-ranking-table tr:not(:first-child)');
                pairRows.forEach((row, index) => {
                    const pair = rankedPairs[index];
                    if (pair) {
                        row.querySelector('.pair-name').value = pair.name;
                        row.querySelector('.pair-wins').value = pair.wins;
                        row.querySelector('.pair-losses').value = pair.losses;
                        row.querySelector('.pair-win-rate').value = pair.winRate;
                    } else {
                        row.querySelector('.pair-name').value = '';
                        row.querySelector('.pair-wins').value = '';
                        row.querySelector('.pair-losses').value = '';
                        row.querySelector('.pair-win-rate').value = '';
                    }
                });

                // MMR 그래프 업데이트
                updateChart(rankedPlayers);

                // 통계 대시보드 업데이트
                document.getElementById('total-matches').textContent = totalMatches;
                document.getElementById('avg-close-set').textContent = totalMatches ? (totalCloseSets / totalMatches * 100).toFixed(2) + '%' : '0%';
                document.getElementById('bagel-rate').textContent = totalMatches ? (totalBagelWins / (totalMatches * 2) * 100).toFixed(2) + '%' : '0%';

                // Firebase에 데이터 업로드
                const data = {
                    date: currentDate,
                    players: Object.entries(players).map(([name, stats]) => ({ name, ...stats })),
                    pairs: Object.entries(pairs).map(([name, stats]) => ({ name, ...stats })),
                    schedule: Array.from(document.querySelectorAll('.schedule-table tr:not(:first-child)')).map(row => ({
                        round: parseInt(row.parentElement.previousElementSibling.textContent),
                        match1: {
                            p1: row.querySelector('.player1').value.trim(),
                            p2: row.querySelector('.player2').value.trim(),
                            p3: row.querySelector('.player3').value.trim(),
                            p4: row.querySelector('.player4').value.trim(),
                            score: row.querySelector('.score').value.trim()
                        }
                    }))
                };
                tennisRef.set(data);
            }

            function updateChart(rankedPlayers) {
                const ctx = document.getElementById('mmrChart').getContext('2d');
                if (chartInstance) chartInstance.destroy();

                const labels = rankedPlayers.map(p => p.name);
                const data = rankedPlayers.map(p => p.mmr);

                chartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'MMR',
                            data: data,
                            backgroundColor: 'rgba(26, 60, 52, 0.7)',
                            borderColor: 'rgba(212, 160, 23, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: { beginAtZero: false, title: { display: true, text: 'MMR' } }
                        }
                    }
                });
            }

            function downloadFile() {
                const data = {
                    date: currentDate,
                    players: Object.entries(players).map(([name, stats]) => ({
                        name,
                        wins: stats.wins,
                        losses: stats.losses,
                        gameDiff: stats.gameDiff,
                        closeSets: stats.closeSets,
                        totalSets: stats.totalSets,
                        bagelWins: stats.bagelWins,
                        mmr: Math.round(stats.mmr)
                    })),
                    pairs: Object.entries(pairs).map(([name, stats]) => ({
                        name,
                        wins: stats.wins,
                        losses: stats.losses,
                        winRate: stats.wins + stats.losses ? (stats.wins / (stats.wins + stats.losses) * 100).toFixed(2) : 0
                    })),
                    schedule: Array.from(document.querySelectorAll('.schedule-table tr:not(:first-child)')).map(row => ({
                        round: parseInt(row.parentElement.previousElementSibling.textContent),
                        match1: {
                            p1: row.querySelector('.player1').value.trim(),
                            p2: row.querySelector('.player2').value.trim(),
                            p3: row.querySelector('.player3').value